{% extends "base.html" %}

{% block content %}
<section class="page-section">
    <div style="text-align: center; margin-bottom: 3rem;">
        <h2 class="page-title" style="border-bottom: none;">Health Consultation</h2>
        <p style="color: var(--color-text-light); max-width: 600px; margin: 0 auto;">
            Please identify your condition to receive a Bio-Electric nutritional protocol.
        </p>
    </div>

    <form method="post" action="{{ url_for('diagnose_view') }}" class="diagnose-form" style="max-width: 600px; margin: 0 auto;">
        
        <div style="margin-bottom: 1.5rem;">
            <label for="category_select" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: var(--color-primary);">
                1. Select Manifestation Type
            </label>
            <select id="category_select" style="width: 100%;">
                <option value="" disabled selected>-- Select Type --</option>
                {% for cat in categories %}
                    <option value="{{ loop.index0 }}">{{ cat.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div style="margin-bottom: 2rem;">
            <label for="disease_id" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: var(--color-primary);">
                2. Select Specific Condition
            </label>
            <select name="disease_id" id="disease_id" style="width: 100%;" disabled>
                <option value="">-- First, select type above --</option>
            </select>
        </div>

        <div class="form-actions" style="text-align: center;">
            <button type="submit" id="btnSubmit" class="primary-button" style="width: 100%;" disabled>
                Generate Protocol
            </button>
        </div>
    </form>

    <div id="data-source" data-categories='{{ categories | tojson }}' style="display:none;"></div>

    <script>
        // 2. Baca datanya menggunakan JavaScript murni
        const dataElement = document.getElementById('data-source');
        // Parsing string JSON dari atribut data-categories
        const categoriesData = JSON.parse(dataElement.dataset.categories);
    </script>

</section>
{% endblock %}